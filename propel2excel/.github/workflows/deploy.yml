name: Deploy to GoDaddy

on:
    workflow_dispatch:
        
    pull_request:
        branches:
        - main      
    
    push:
        branches:
        - main  # Triggers the workflow on push events to the main branch
    
    
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '20.10.0'  # Set to the Node.js version used in your project

    - name: Install Dependencies
      run: npm install

    - name: Build Project
      run: npm run build  # Runs your project's build command

    - name: FTP Deploy to GoDaddy
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        ftp-server: ftp://ftp.propel2excel.com/  # Your FTP server
        ftp-username: ${{ secrets.FTP_USERNAME }}  # Your FTP username as a GitHub secret
        ftp-password: ${{ secrets.FTP_PASSWORD }}  # Your FTP password as a GitHub secret
        local-dir: ./build/  # The directory where your build output is stored
        remote-dir: /home/d9rk2h90n620/public_html  # The target directory on your GoDaddy server
        port: 21
